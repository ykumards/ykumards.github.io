<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    
        <title>Match an IP address</title>
    

    <meta name="description" content="notes">

    

    <link rel="icon" href="/assets/img/favicon.png">
    <link href='https://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>
    <!-- <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">  -->
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css">
    <link href="/assets/css/syntax.css" rel="stylesheet">
</head>

<body>

    <div class="wrapper">
        <div class="post">
  <a class="post__back" href="/">&lt;-- home</a>
  <h1 class="post__title">Match an IP address</h1>
  <p class="post__date">March 2, 2018</p>

  <ul class="tags">
      Tags:
      
        <a href="/tags#python" class="tag">python</a>.
      
        <a href="/tags#regex" class="tag">regex</a>.
      
        <a href="/tags#text" class="tag">text</a>.
      
  </ul>

  <div class="post__content"?>
    <p>Sometimes we’d need to match IP addresses in a text, probably to extract them or filter them out. I faced this while working on the Kaggle’s Toxic Comments challenge, many of the texts end with an IP address. If you’re trying extract features like “number of sentences in the comment”, these IPs could mess the count.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">re</span>

<span class="n">text</span> <span class="o">=</span> <span class="s">"And please don't remove the template from the talk page since I'm retired now.89.205.38.27"</span>
<span class="n">ip</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">r'[0-9]+(?:</span><span class="err">\</span><span class="s">.[0-9]+){3}'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="s">' &lt;IP&gt; '</span><span class="p">,</span> <span class="n">text</span><span class="p">))</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>And please don't remove the template from the talk page since I'm retired now. &lt;IP&gt; 
</code></pre>
</div>

<p>This code replaces the IP with the tag <code class="highlighter-rouge">&lt;IP&gt;</code>. The filter is not fool-proof though, it sometimes lets in invalid ip addresses.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">adversarial_text</span> <span class="o">=</span> <span class="s">"And please don't remove the template from the talk page since I'm retired now.0.00.999.9999"</span>
<span class="k">print</span><span class="p">(</span><span class="n">ip</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">adversarial_text</span><span class="p">))</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>['0.00.999.9999']
</code></pre>
</div>

<p>This is not a problem for my use case, but is an issue if we’re say, verifying the entry in a form. The regex info webpage has some solutions for this <a href="https://www.regular-expressions.info/ip.html">here</a>.</p>

  </div>
  

</div>

    </div>

</body>

</html>
